@model IEnumerable<ProyectoComex.Models.Cliente> 

<h2>Los clientes</h2>


<div class="container">
	<table class="table table-borderer">
		<thead class="table-light">
			<tr>
				<th>Id</th>	
				<th>CUIT</th>	
				<th>RazonSocial</th>	
				<th>Telefono</th>
				<th>Direccion</th>
				<th>Activo</th>
				<th>Enlace</th>
			</tr>
			
		</thead>
		<tbody>
			@foreach (var item in Model)
			{
				<tr>
					<td>@item.Id</td>
					<td>@item.CUIT</td>
					<td>@item.RazonSocial</td>
					<td>@item.Telefono</td>
					<td>@item.Direccion</td>
					<td>@item.Activo</td>
					<td>
						@* <a href="@Url.Action("Update", "Clientes", new { id = item.Id })">Editar</a> *@
						<a asp-action="Update" asp-route-id="@item.Id">Editar</a>
						@* /{controller}/{action}/{id?} *@

						<a href="#" class="delete-link" data-id="@item.Id">Eliminar</a>
					</td>
				</tr>
				
			}

		</tbody>

	</table>
	<form id="deleteForm" method="post" asp-action="Delete" asp-controller="Clientes">
		<input type="hidden" name="id" id="deleteId" />
	</form>
</div>
<div>
	<a asp-action="Create" asp-controller="Clientes" class="btn btn-primary">Agregar nuevo cliente</a>



</div>

@section Scripts {
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const deleteLinks = document.querySelectorAll(".delete-link");
			const form = document.getElementById("deleteForm");
			const input = document.getElementById("deleteId");

			deleteLinks.forEach(link => {
				link.addEventListener("click", function (event) {
					event.preventDefault();

					const id = this.getAttribute("data-id");
					const confirmed = confirm("¿Estás seguro de que querés eliminar este cliente?");

					if (confirmed) {
						input.value = id;
						form.submit();
					}
				});
			});
		});
	</script>
}
